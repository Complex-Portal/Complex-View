<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.prime.com.tr/ui"
                xmlns:sf="http://www.ebi.ac.uk/faces/site"

                xmlns:iav="http://intact.ebi.ac.uk/view"
                xmlns:iax="http://intact.ebi.ac.uk/extlinks"

                template="/WEB-INF/facelets/layout/template.xhtml">

    <!--<ui:define name="additionalHeader">-->
        <!--<h:panelGroup rendered="#{disclosedTabName == 'molecule'}">-->
            <!--<iav:dastyHeader/>-->
        <!--</h:panelGroup>-->
    <!--</ui:define>-->

    <ui:define name="content">

        <h:panelGroup>

            <!--<tr:poll id="warningPoll" interval="120000"/>-->

            <h:panelGroup>
                <p:panel header="Important notice" background="transparent"
                             icon="/images/warning.gif"
                             rendered="#{not empty intactViewConfiguration.warningMessage}">
                    <h:outputText value="#{intactViewConfiguration.warningMessage}"/>
                </p:panel>
            </h:panelGroup>

        </h:panelGroup>

        <ui:include src="pages/search/search_panel.xhtml"/>


        <p:tabView id="mainPanels" cache="false">
            
            <p:tab title="Home" 
                               disclosed="#{disclosedTabName == 'about'}">
                <p:messages/>
                <ui:insert name="aboutTabContent"/>
            </p:tab>

            <p:tab title="Search"
                               disclosed="#{disclosedTabName == 'search'}">
                <p:messages/>
                <ui:insert name="searchTabContent"/>
            </p:tab>

            <p:tab title="Interactions (#{searchBean.totalResults})"
                               disabled="#{searchBean.totalResults == 0}"
                               disclosed="#{disclosedTabName == 'interactions'}">
                <p:messages/>
                <ui:insert name="interactionsTabContent"/>
            </p:tab>

            <p:tab title="Browse"
                               disabled="#{searchBean.totalResults == 0}"
                               disclosed="#{disclosedTabName == 'browse'}">
                <p:messages/>
                <ui:insert name="browseTabContent"/>
            </p:tab>

            <p:tab title="Lists"
                               disabled="#{searchBean.totalResults == 0}"
                               disclosed="#{disclosedTabName == 'list'}">
                <p:messages/>
                <ui:insert name="listTabContent"/>
            </p:tab>

            <p:tab title="Interaction Details" disabled="#{detailsBean.interaction == null}"
                               disclosed="#{disclosedTabName == 'details'}">
                <p:messages/>
                <ui:insert name="detailsTabContent"/>
            </p:tab>

            <p:tab title="Molecule View" disabled="#{moleculeViewBean.interactor == null}"
                               disclosed="#{disclosedTabName == 'molecule'}">
                <p:messages/>
                <ui:insert name="moleculeTabContent"/>
            </p:tab>

            <p:tab title="Graph"
                               shortDesc="#{searchBean.totalResults > intactViewConfiguration.graphMaxInteractionCount ? 'Too many interactions selected to display a graphical network' : 'Click this tab to visualize the interaction network' }"
                               disabled="#{searchBean.totalResults == 0 or searchBean.totalResults > intactViewConfiguration.graphMaxInteractionCount }">
                <p:messages/>
                <ui:insert name="graphTabContent"/>
            </p:tab>

        </p:tabView>

    </ui:define>

</ui:composition>
