<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"

                template="/pages/browse/browser_template.xhtml">

    <f:metadata>
        <f:event type="preRenderView" listener="#{contextController.setActiveTabIndex(1)}"/>
        <f:event type="preRenderView" listener="#{taxonomyBrowser.searchOnLoad}"/>
    </f:metadata>

     <ui:define name="browseTabContent">

        <h2>Taxonomy Browser</h2>

         <section>
             <h:panelGroup>
                 <h:graphicImage alt="Back" url="/images/back_arrow.gif" />
                 <p:commandLink value="Back to Browse options" action="/pages/browse/browse?faces-redirect=true&amp;includeViewParams=true" ajax="false"/>
             </h:panelGroup>
         </section>

         <section>
             <p:tree var="otw" value="#{taxonomyBrowser.ontologyTreeNode}"
                     dynamic="true" cache="true"
                     selectionMode="single" selection="#{taxonomyBrowser.selectedNode}"
                     style="width:50%;">

                 <p:ajax event="select" listener="#{taxonomyBrowser.onNodeSelect}" process="@this" onstart="statusDialog.show()" oncomplete="statusDialog.hide()"/>

                 <p:treeNode>
                     <h:outputText value="#{otw.term.name} - (#{otw.interactionCount} interactions)"/>
                 </p:treeNode>
             </p:tree>
         </section>
    </ui:define>

</ui:composition>