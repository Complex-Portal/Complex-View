<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"

                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:sf="http://www.ebi.ac.uk/faces/site"

                xmlns:iv="http://java.sun.com/jsf/composite/intactview">

    <ui:param name="displayWarning" value="#{browseBean.maxSize lt searchBean.interactorTotalResults}"/>

    <section class="push_20 grid_4 omega">
        <p:commandLink onclick="whatIsBrowseDialog.show()">
            What is this view?
            <h:graphicImage alt="helpIcon" url="/images/help.png"/>
        </p:commandLink>
    </section>

    <section class="grid_24">
        <section class="grid_12">
            <h3>Browse by Uniprot taxonomy</h3>

            <p:tree var="otw" value="#{taxonomyBrowser.ontologyTreeNode}"
                    dynamic="true" cache="true"
                    selectionMode="single" selection="#{taxonomyBrowser.selectedNode}"
                    style="width:50%;">

                <p:ajax event="select" listener="#{taxonomyBrowser.onNodeSelect}" process="@this" onstart="statusDialog.show()" oncomplete="statusDialog.hide()"/>

                <p:treeNode>
                    <h:outputText value="#{otw.term.name} - (#{otw.interactionCount} interactions)"/>
                </p:treeNode>
            </p:tree>
        </section>
        <section class="grid_12">
            <h3>Browse by Gene Ontology</h3>

            <p:tree id="goTree" var="otw" value="#{goBrowser.ontologyTreeNode}"
                    dynamic="true" cache="true"
                    selectionMode="single" selection="#{goBrowser.selectedNode}"
                    style="width:50%;">

                <p:ajax event="select" listener="#{goBrowser.onNodeSelect}" process="@this" onstart="statusDialog.show()" oncomplete="statusDialog.hide()"/>

                <p:treeNode>
                    <h:outputText value="#{otw.term.name} - (#{otw.interactionCount} interactions)"/>
                </p:treeNode>
            </p:tree>
        </section>
        <section class="grid_12">
            <h3>Browse by CHEBI ontology</h3>

            <p:tree var="otw" value="#{chebiBrowser.ontologyTreeNode}"
                    dynamic="true" cache="true"
                    selectionMode="single" selection="#{chebiBrowser.selectedNode}"
                    style="width:50%;">

                <p:ajax event="select" listener="#{chebiBrowser.onNodeSelect}" process="@this" onstart="statusDialog.show()" oncomplete="statusDialog.hide()"/>

                <p:treeNode>
                    <h:outputText value="#{otw.term.name} - (#{otw.interactionCount} interactions)"/>
                </p:treeNode>
            </p:tree>
        </section>
    </section>
    <section class="grid_24">

        <section class="grid_12">
            <h3>Proteins (#{searchBean.proteinTotalResults})</h3>

            <p:panel header="Numerous interactors available"
                     rendered="#{displayWarning}" style="float:right; width: 300px">
                <h:outputText value="Please be aware that due to the number of interaction currently available in
                                      your dataset, only the first #{browseBean.maxSize} interactor identifiers will be passed on to
                                      third party resources (only the first #{browseBean.maxSizeRNAExpression} for mRNA expression ). In order to make this clear, we will display the icon"/>
                &#160;
                <h:graphicImage alt="warnIcon" url="/images/warning_icon.png"/>
                &#160;
                <h:outputText value="whenever this restriction applies."/>
            </p:panel>

            <h:panelGroup style="text-align:left; vertical-align:top">

                <table style="text-align:left" border="0" cellSpacing="5" cellPadding="0" width="300">

                    <tr>
                        <td style="text-align: center" width="15">

                        </td>
                        <td>
                            <p:commandLink value="List All" action="/pages/list/protein_list?faces-redirect=true&amp;includeViewParams=true" ajax="false"/>
                        </td>
                    </tr>

                    <tr>
                        <td style="text-align: center" width="15">

                        </td>
                        <td>
                            <p:commandLink value="By Gene Ontology (GO)" action="/pages/browse/gobrowser?faces-redirect=true&amp;includeViewParams=true" ajax="false"/>
                        </td>
                    </tr>

                    <!-- DISABLED because not working anymore <tr>
                        <td style="text-align: center" width="15">
                            <h:graphicImage alt="warnIcon" url="/images/warning_icon.png"
                                            rendered="#{displayWarning}" title="Numerous interactors available"/>
                        </td>
                        <td>
                            <h:outputLink target="_blank"
                                          value="http://www.ebi.ac.uk/interpro/IProtein?ac=#{browseBean.interproIdentifierList}&amp;sort=ac">By Interpro Domain</h:outputLink>
                        </td>
                    </tr>-->

                    <tr>
                        <td style="text-align: center" width="15">
                            <h:graphicImage alt="warnIcon" url="/images/warning_icon.png"
                                            rendered="#{displayWarning}" title="Numerous interactors available"/>
                        </td>
                        <td>

                            <h:outputLink value="javascript:void(0)" onclick="ia_submitToReactome('#{fn:join(browseBean.reactomeIdentifierList,',')}')">
                                <h:outputText value="By Reactome Pathway"/>
                            </h:outputLink>

                        </td>
                    </tr>

                    <tr>
                        <td style="text-align: center" width="15">
                            <h:graphicImage alt="warnIcon" url="/images/warning_icon.png"
                                            rendered="#{displayWarning}" title="Numerous interactors available"/>
                        </td>
                        <td>
                            <h:outputLink target="_blank"
                                          value="http://www.ensembl.org/Homo_sapiens/featureview?type=ProteinAlignFeature;id=#{browseBean.chromosomalLocationIdentifierList}">By Chromosomal Location</h:outputLink>
                        </td>
                    </tr>

                    <tr>
                        <td style="text-align: center" width="15">
                            <h:graphicImage alt="warnIcon" url="/images/warning_icon.png"
                                            rendered="#{displayWarning}" title="Numerous interactors available"/>
                        </td>
                        <td>
                            <h:outputLink target="_blank"
                                          value="http://www.ebi.ac.uk/gxa/qrs?gprop_0=&amp;gval_0=#{browseBean.MRNAExpressionIdentifierList}&amp;fexp_0=UP_DOWN&amp;fact_0=&amp;specie_0=&amp;fval_0=&amp;view=h">By mRNA expression</h:outputLink>
                        </td>
                    </tr>

                </table>

            </h:panelGroup>
        </section>
    </section>

</ui:composition>