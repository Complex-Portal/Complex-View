<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:tr="http://myfaces.apache.org/trinidad"
                xmlns:trh="http://myfaces.apache.org/trinidad/html"
                xmlns:c="http://java.sun.com/jstl/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:sf="http://www.ebi.ac.uk/faces/site"
                xmlns:ebi="http://ebi.ac.uk/faces/components"
                xmlns:iav="http://intact.ebi.ac.uk/view"
                xmlns:iaf="http://intact.ebi.ac.uk/functions"
                xmlns:iax="http://intact.ebi.ac.uk/extlinks">

    <c:set var="displayWarning" value="#{searchBean.results.pageSize lt searchBean.interactorTotalResults}" />
    <!--<c:set var="displayWarningForGO" value="#{searchBean.searchQuery eq '*' or searchBean.searchQuery eq ''}" />-->

     <tr:group>
        Displaying results for query:
        <strong><ebi:outputText id="queryText" value="#{searchBean.displayQuery}" maxLength="50"
                        expandMessage="(see entire query)" collapseMessage="(collapse)"/></strong>
         <em> (Note: To 'Browse All' click the 'Clear' button on the left menu) </em>
    </tr:group>
    
    <tr:panelHeader text="Proteins (#{searchBean.proteinTotalResults})">

        <tr:panelHorizontalLayout halign="left" valign="top">

            <trh:tableLayout borderWidth="0"
                             cellSpacing="5"
                             cellPadding="0"
                             halign="left"
                             width="300">

                <trh:rowLayout>
                    <trh:cellFormat halign="center" width="15">
                        
                    </trh:cellFormat>
                    <trh:cellFormat>
                        <tr:commandLink text="All" action="list.proteins"/>
                    </trh:cellFormat>
                </trh:rowLayout>

                <trh:rowLayout>
                    <trh:cellFormat halign="center" width="15">

                    </trh:cellFormat>
                    <trh:cellFormat>
                        <tr:commandLink text="By Gene Ontology (GO)" action="browse.gobrowser"/>
                    </trh:cellFormat>
                </trh:rowLayout>

                <trh:rowLayout>
                    <trh:cellFormat halign="center" width="15">
                        <tr:image source="/images/warning.gif" rendered="#{displayWarning}"/>
                    </trh:cellFormat>
                    <trh:cellFormat>
                        <tr:goLink text="By Interpro Domain" targetFrame="_blank"
                                   destination="http://www.ebi.ac.uk/interpro/ISpy?ac=#{browseBean.interproIdentifierList}&amp;mode=protein&amp;sort=ac"/>
                    </trh:cellFormat>
                </trh:rowLayout>

                <trh:rowLayout>
                    <trh:cellFormat halign="center" width="15">
                        <tr:image source="/images/warning.gif" rendered="#{displayWarning}"/>
                    </trh:cellFormat>
                    <trh:cellFormat>
                        <f:subview id="rectomeView">
                            <form id="reactomeForm" method="post" action="http://www.reactome.org/cgi-bin/skypainter2"
                                  enctype="multipart/form-data" name="skypainter" target="_blank">
                                <input type="hidden" name="QUERY" value="#{browseBean.reactomeIdentifierList}"/>
                                <input type="hidden" name="DB" value="gk_current"/>
                                <input type="hidden" name="SUBMIT" value="1"/>
                                <a href="#"
                                   onclick="document.getElementById('reactomeForm').submit();">By Reactome Pathway</a>
                            </form>
                        </f:subview>
                    </trh:cellFormat>
                </trh:rowLayout>

                <trh:rowLayout>
                    <trh:cellFormat halign="center" width="15">
                        <tr:image source="/images/warning.gif" rendered="#{displayWarning}"/>
                    </trh:cellFormat>
                    <trh:cellFormat>
                        <tr:goLink text="By Chromosomal Location" targetFrame="_blank"
                                   destination="http://www.ensembl.org/Homo_sapiens/featureview?type=ProteinAlignFeature;id=#{browseBean.chromosomalLocationIdentifierList}"/>
                    </trh:cellFormat>
                </trh:rowLayout>

                <trh:rowLayout>
                    <trh:cellFormat halign="center" width="15">
                        <tr:image source="/images/warning.gif" rendered="#{displayWarning}"/>
                    </trh:cellFormat>
                    <trh:cellFormat>
                        <tr:goLink text="By mRNA expression" targetFrame="_blank"
                                   destination="http://www.ebi.ac.uk/microarray-as/atlas/qr?q_gene=#{browseBean.MRNAExpressionIdentifierList}&amp;q_updn=updn&amp;q_expt=%28all+conditions%29&amp;q_orgn=HOMO+SAPIENS&amp;view=heatmap&amp;expand_efo=on&amp;view="/>
                    </trh:cellFormat>
                </trh:rowLayout>

            </trh:tableLayout>

            <tr:panelBox text="Numerous interactors available" background="dark"
                         icon="/images/warning.gif"
                         rendered="#{displayWarning}">
                <tr:outputText value="Please be aware that due to the number of interaction currently available in
                                      your dataset, only the first #{searchBean.results.pageSize} interactors' identifier will be passed on to
                                      third party resources. In order to make this clear, we will display the icon"/>
                <tr:spacer width="3" />
                <tr:image source="/images/warning.gif"/>
                <tr:spacer width="3" />
                <tr:outputText value="whenever this restriction applies."/>
            </tr:panelBox>


           <!-- <tr:panelBox text="Browsing on subset only" background="dark"
                         icon="/images/warning.gif"
                         rendered="#{!displayWarningForGO}">
                <tr:outputText value="Please be aware that you will be browsing the GeneOntology and other database resources limiting to your search query only.
                                      To browse all click here..."/>
                <tr:commandLink text="Reset Search" action="#{searchBean.resetSearch}"/>
            </tr:panelBox>
-->

        </tr:panelHorizontalLayout>

    </tr:panelHeader>

    <tr:panelHeader text="Chemicals (#{searchBean.smallMoleculeTotalResults})">

        <trh:tableLayout borderWidth="0"
                         cellSpacing="5"
                         cellPadding="0"
                         halign="left"
                         width="300">

            <trh:rowLayout>
                <trh:cellFormat halign="center" width="15" >

                </trh:cellFormat>
                <trh:cellFormat>
                    <tr:commandLink text="All" action="list.compounds"/>
                </trh:cellFormat>
            </trh:rowLayout>

            <trh:rowLayout>
                <trh:cellFormat halign="center" width="15">

                </trh:cellFormat>
                <trh:cellFormat>
                    <tr:goLink text="By ChEBI Ontology" targetFrame="_blank" destination=" "
                               disabled="true" shortDesc="Not implemented yet..."/>
                </trh:cellFormat>
            </trh:rowLayout>

        </trh:tableLayout>

    </tr:panelHeader>

</ui:composition>