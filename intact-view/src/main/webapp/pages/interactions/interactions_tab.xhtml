<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.prime.com.tr/ui"

                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:sf="http://www.ebi.ac.uk/faces/site"

                xmlns:iav="http://intact.ebi.ac.uk/view"
                xmlns:iam="http://intact.ebi.ac.uk/miscel"
                xmlns:iax="http://intact.ebi.ac.uk/extlinks"
                xmlns:iaf="http://intact.ebi.ac.uk/functions"
                xmlns:iamf="http://intact.ebi.ac.uk/mitabfunctions">

<!-- Info section on top of the results -->

<div style="float:right">
    <p:commandLink onclick="whatIsInteractionsDialog.show()">
        What is this view
        <h:graphicImage alt="helpIcon" url="/images/help.png"/>
    </p:commandLink>
</div>

<p:dialog header="What is this view?" widgetVar="whatIsInteractionsDialog" fixedCenter="true"
          width="700px" height="500px">
    <div style="width:690px; height:490px; overflow:auto;">
        <ui:include src="/pages/documentation/contextual/whatis_interactions.xhtml"/>
    </div>
</p:dialog>

<h:panelGroup style="margin-left: 10px; margin-top:5px" rendered="#{searchBean.totalResults gt 0}">

    <h:graphicImage alt="browseImg" url="/images/browse.png"/>
    <h:outputText value=" Browse by "/>
    <h:panelGroup>
        <h:commandLink value="taxonomy" action="browse.taxonomybrowser"/>,&#160;
        <h:commandLink value="gene ontology" action="browse.gobrowser"/>,&#160;
        <h:commandLink value="ChEBI ontology" action="browse.chebibrowser"
                rendered="#{facetController.interactorTypeCount.smallMoleculeCount > 0}"/>
    </h:panelGroup>
</h:panelGroup>

<hr/>

    > <strong><h:outputText value="#{searchBean.totalResults}">
            <f:convertNumber pattern="#,###"/>
        </h:outputText></strong> binary interaction#{searchBean.totalResults != 1? 's were' : ' was'} found in #{intactViewConfiguration.webappName}.

<h:panelGroup rendered="#{facetController.expansionCount.spokeCount > 0}"
                     inlineStyle="margin-top:-10px; margin-left: 10px; margin-bottom:30px">
    <strong><h:outputText value="#{facetController.expansionCount.spokeCount}">
            <f:convertNumber pattern="#,###"/>
        </h:outputText>
    </strong> of them are originated
    from&#160;
    <p:commandLink onclick="complexExpansionDialog.show()">spoke expanded co-complexes
        <h:graphicImage alt="helpIcon" url="/images/help.png"/>
    </p:commandLink> and you may want to&#160;
    <h:commandLink value="filter" action="#{searchBean.doBinarySearchAction}" actionListener="#{userQuery.doAddTermToQuery}">
        <f:param name="token_operand" value="AND"/>
        <f:param name="token_not" value="not"/>
        <f:param name="token_query" value="spoke"/>
        <f:param name="token_field" value="expansion"/>
    </h:commandLink>
    &#160;them.

    <p:dialog header="Complex Expansion" widgetVar="complexExpansionDialog" fixedCenter="true"
              width="700px" height="500px">
        <div style="width:690px; height:490px; overflow:auto;">
            <ui:include src="/pages/documentation/contextual/complex_expansion.xhtml"/>
        </div>
    </p:dialog>

</h:panelGroup>

<!--<tr:panelGroupLayout inlineStyle="display:#{searchBean.countInOtherDatabases == -1? 'inline' : 'none'}" partialTriggers=":psicquicPoll">-->
    <!--<br/>-->
    <!--<span style="color:gray">-->
    <!--> [Counting results in other databases...]-->
    <!--</span>-->
<!--</tr:panelGroupLayout>-->

<!--<tr:panelGroupLayout partialTriggers="psicquicPoll"-->
                     <!--inlineStyle="margin-top:-10px; margin-left: 10px; margin-bottom:30px; display:#{(searchBean.countInOtherDatabases gt 0 and not searchBean.psicquicQueryRunning)? 'inline' : 'none'}"-->
                     <!-->-->
    <!--<br/>-->
    <!--<h:outputText value="> Your query #{searchBean.totalResults > 0? 'also ' : ''}matches "/>-->
    <!--<tr:goLink destination="#{intactViewConfiguration.psicquicViewUrl}main.xhtml?query=#{userQuery.searchQuery}" targetFrame="_blank">-->
        <!--<h:outputText value="#{searchBean.countInOtherDatabases}" inlineStyle="font-weight:bold">-->
            <!--<tr:convertNumber pattern="#,###"/>-->
        <!--</h:outputText>-->
    <!--</tr:goLink>-->

    <!--interaction evidences from <b>#{searchBean.otherDatabasesWithResults}</b> other databases.-->
    <!--<tr:commandLink action="dialog:faq.psicquic"-->
                    <!--partialSubmit="true"-->
                    <!--windowWidth="700" windowHeight="500"-->
                    <!--immediate="true" useWindow="true">-->
        <!--<tr:image source="/images/help.png"/>-->
    <!--</tr:commandLink>-->

    <!--<tr:panelGroupLayout rendered="#{searchBean.countInOtherImexDatabases gt 0}">-->
        <!--<br/>-->
        <!--<h:outputText value="> Your query #{searchBean.totalResults > 0? 'also ' : ''}matches "/>-->
        <!--<tr:goLink destination="#{intactViewConfiguration.imexViewUrl}main.xhtml?query=#{userQuery.searchQuery}" targetFrame="_blank">-->
            <!--<h:outputText value="#{searchBean.countInOtherImexDatabases}" inlineStyle="font-weight:bold">-->
                <!--<tr:convertNumber pattern="#,###"/>-->
            <!--</h:outputText>-->
        <!--</tr:goLink>-->

        <!--interaction evidences from <b>#{searchBean.otherImexDatabasesWithResults}</b> other IMEx databases.-->
        <!--<tr:commandLink action="dialog:faq.psicquic.imex"-->
                        <!--partialSubmit="true"-->
                        <!--windowWidth="700" windowHeight="500"-->
                        <!--immediate="true" useWindow="true">-->
            <!--<tr:image source="/images/help.png"/>-->
        <!--</tr:commandLink>-->
     <!--</tr:panelGroupLayout>-->
<!--</tr:panelGroupLayout>-->

<!--<tr:panelGroupLayout inlineStyle="display:#{(searchBean.countInOtherDatabases == 0 and not searchBean.psicquicQueryRunning)? 'inline' : 'none'}" partialTriggers="psicquicPoll">-->

    <!--<br/>-->
    <!--> No results in other databases.-->
    <!--<tr:commandLink action="dialog:faq.psicquic"-->
                    <!--partialSubmit="true"-->
                    <!--windowWidth="700" windowHeight="500"-->
                    <!--immediate="true" useWindow="true">-->
        <!--<tr:image source="/images/help.png"/>-->
    <!--</tr:commandLink>-->
<!--</tr:panelGroupLayout>-->

<hr/>

<!-- RESULTS TABLE -->

<ui:include src="interactionTable.xhtml"/>

</ui:composition>