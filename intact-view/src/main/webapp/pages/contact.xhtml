<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jstl/core"
                xmlns:tr="http://myfaces.apache.org/trinidad"
                xmlns:trh="http://myfaces.apache.org/trinidad/html"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:ebi="http://ebi.ac.uk/faces/components"
                xmlns:ebisf="http://www.ebi.ac.uk/faces/site"

                template="/WEB-INF/facelets/layout/template.xhtml">

    <ui:define name="content">

        <tr:messages/>

        <tr:panelHeader text="Contact Us">

            <tr:panelGroupLayout layout="vertical">
                <f:facet name="separator">
                    <tr:spacer height="10px" width="1px"/>
                </f:facet>
                Use the following form to contact us, as for information, provide feedback or report bugs:

            <tr:panelBox background="light">
                
                <tr:panelFormLayout partialTriggers="typeList">
                    <tr:selectOneChoice id="typeList" value="#{contactBean.type}" label="Type"
                                        autoSubmit="true">
                        <f:selectItem itemValue="info" itemLabel="Information request"/>
                        <f:selectItem itemValue="bug" itemLabel="Report a bug"/>
                    </tr:selectOneChoice>

                    <tr:inputText label="Email address"
                                  value="#{contactBean.userEmail}" columns="20"
                                  required="true">
                        <tr:validateRegExp pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*\.(\w{2,3})$"
                                           messageDetailNoMatch="The user email format is not valid"/>
                     </tr:inputText>

                    <tr:inputText label="What were you doing?"
                                  required="true"
                                  rendered="#{contactBean.type eq 'bug'}"
                                  value="#{contactBean.contextualMessage}" rows="5" columns="60"/>

                    <tr:inputText label="#{contactBean.type eq 'info'? 'Message' : 'Bug description'}"
                                  required="true"
                                  value="#{contactBean.mainMessage}" rows="5" columns="60"/>

                    <tr:panelButtonBar>
                        <tr:commandButton text="Send" actionListener="#{contactBean.sendEmail}" />
                        <tr:resetButton text="Reset" />
                    </tr:panelButtonBar>

                </tr:panelFormLayout>
            </tr:panelBox>
            </tr:panelGroupLayout>

        </tr:panelHeader>


    </ui:define>

</ui:composition>
