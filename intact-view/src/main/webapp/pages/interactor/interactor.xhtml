<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:t="http://myfaces.apache.org/tomahawk"
                xmlns:c="http://java.sun.com/jstl/core"
                xmlns:tr="http://myfaces.apache.org/trinidad"
                xmlns:trh="http://myfaces.apache.org/trinidad/html"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:ebi="http://ebi.ac.uk/faces/components"
                xmlns:ebisf="http://www.ebi.ac.uk/faces/site"
                xmlns:iav="http://intact.ebi.ac.uk/view"
                xmlns:iaf="http://intact.ebi.ac.uk/functions"
                template="/WEB-INF/facelets/layout/template.xhtml">

    <ui:define name="additionalHeader">
        <iav:dastyHeader/>
    </ui:define>

    <!-- content -->
    <ui:define name="content">

        <tr:panelHeader text="Interactor: #{interactorBean.currentInteractor.shortLabel}">
            <tr:panelFormLayout maxColumns="1">
                <tr:panelLabelAndMessage label="Molecule type:">
                    <tr:outputText
                            value="#{interactorBean.currentInteractor.cvInteractorType.shortLabel} (#{interactorBean.currentInteractor.cvInteractorType.miIdentifier})"/>
                </tr:panelLabelAndMessage>
                <tr:panelLabelAndMessage label="Short name:">
                    <tr:outputText value="#{interactorBean.currentInteractor.shortLabel}"/>
                </tr:panelLabelAndMessage>
                <tr:panelLabelAndMessage label="Description:">
                    <tr:outputText value="#{interactorBean.currentInteractor.fullName}"/>
                </tr:panelLabelAndMessage>
                <tr:panelLabelAndMessage label="Species:">
                    <tr:outputText
                            value="#{interactorBean.currentInteractor.bioSource.fullName} (#{interactorBean.currentInteractor.bioSource.taxId})"/>
                </tr:panelLabelAndMessage>
                <tr:panelLabelAndMessage label="IntAct AC:">
                    <tr:outputText value="#{interactorBean.currentInteractor.ac}"/>
                </tr:panelLabelAndMessage>
                <tr:panelLabelAndMessage label="Primary DB Ref:">
                    <tr:iterator var="idXref" value="#{iaf:getIdentityXrefs(interactorBean.currentInteractor)}">
                        <tr:outputText value="#{idXref.primaryId} (#{idXref.cvDatabase.shortLabel})"/>
                    </tr:iterator>
                </tr:panelLabelAndMessage>
            </tr:panelFormLayout>

            <br/>

            <tr:panelTabbed position="above">
                <tr:showDetailItem text="Details">
                    <br/>
                    <iav:dasty query="#{iaf:getIdentifierForDasty(interactorBean.currentInteractor)}"
                               label="BioSapiens"/>
                </tr:showDetailItem>

                <tr:showDetailItem text="Interactions">
                    <tr:panelHeader text="Interactions">
                        <ui:decorate template="/pages/interaction/interaction_table.xhtml">
                            <ui:define name="footer">
                                Nothing
                            </ui:define>

                            <ui:param name="binding" value="#{interactorBean.interactionsTable}"/>
                            <ui:param name="values" value="#{interactorBean.currentInteractorWrapped.interactions}"/>
                        </ui:decorate>
                    </tr:panelHeader>
                </tr:showDetailItem>

                <tr:showDetailItem text="Cross References" disclosed="true">
                    <br/>

                    <iav:panelCategory id="xrefPanel1" var="xrefs" value="#{iaf:toXrefCategoryModel(interactorBean.currentInteractor.xrefs)}">
                        <iav:panelCategoryColumn>
                            <iav:categoryGroup id="protSeqGroup" title="Protein Sequences">
                                <iav:categoryItem name="PRIDE"
                                                   description="Proteomics Identification Database"
                                                   category="pride"
                                                   url="http://www.ebi.ac.uk/pride">

                                </iav:categoryItem>
                                <iav:categoryItem name="UniProt Kb"
                                                   description="UniProt Knowledge Base of protein sequences"
                                                   category="uniprotkb"
                                                   url="http://www.uniprot.org/"/>
                            </iav:categoryGroup>
                            <iav:categoryGroup id="nucSeqGroup" title="Nucleotide Sequences">
                                <iav:categoryItem name="ASTD"
                                                   description="Database of alternative splice events and transcripts of genes from human, mouse and rat"
                                                   category="uniprotkb"
                                                   url="http://www.ebi.ac.uk/astd"/>
                                <iav:categoryItem name="EMBL-Bank"
                                                   description="Europe's primary nucleotide sequence resource"
                                                   category="MI:0475"
                                                   url="http://www.ebi.ac.uk/embl">

                                      <tr:panelList listStyle="list-style-type:decimal" rendered="#{!empty xrefs}">
                                          <tr:iterator var="xrefItem" value="#{xrefs}">
                                              <h:outputText value="#{xrefItem.data.primaryId}"/>
                                          </tr:iterator>
                                      </tr:panelList>


                                    </iav:categoryItem>
                                <iav:categoryItem name="EMBL-Bank (Coding Sequence)"
                                                   description="Coding Sequences in EMBL-Bank"
                                                   category="uniprotkb"
                                                   url="http://srs.ebi.ac.uk/srsbin/cgi-bin/wgetz?-page+LibInfo+-id+1g6A71VejsH+-lib+EMBLCDS"/>
                            </iav:categoryGroup>
                        </iav:panelCategoryColumn>
                    </iav:panelCategory>
                    
                </tr:showDetailItem>
                               

            </tr:panelTabbed>

        </tr:panelHeader>

    </ui:define>

</ui:composition>