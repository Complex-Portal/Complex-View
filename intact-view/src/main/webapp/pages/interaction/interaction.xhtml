<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:t="http://myfaces.apache.org/tomahawk"
                xmlns:c="http://java.sun.com/jstl/core"
                xmlns:tr="http://myfaces.apache.org/trinidad"
                xmlns:trh="http://myfaces.apache.org/trinidad/html"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:ebi="http://ebi.ac.uk/faces/components"
                xmlns:ebisf="http://www.ebi.ac.uk/faces/site"
                xmlns:iav="http://intact.ebi.ac.uk/view"
                xmlns:iaf="http://intact.ebi.ac.uk/functions"
                template="/WEB-INF/facelets/layout/template.xhtml">

    <ui:define name="additionalHeader">
        <iav:dastyHeader/>
    </ui:define>

    <!-- content -->
    <ui:define name="content">

        <tr:panelHeader text="Interaction: #{interactionBean.currentInteraction.shortLabel}">
            <tr:panelFormLayout maxColumns="1">
                <tr:panelLabelAndMessage label="Interaction type:">
                    <tr:outputText
                            value="#{interactionBean.currentInteraction.cvInteractionType.shortLabel} (#{interactionBean.currentInteraction.cvInteractionType.miIdentifier})"/>
                </tr:panelLabelAndMessage>
                <tr:panelLabelAndMessage label="Short name:">
                    <tr:outputText value="#{interactionBean.currentInteraction.shortLabel}"/>
                </tr:panelLabelAndMessage>
                <tr:panelLabelAndMessage label="Description:">
                    <tr:outputText value="#{interactionBean.currentInteraction.fullName}"/>
                </tr:panelLabelAndMessage>
                <tr:panelLabelAndMessage label="IntAct AC:">
                    <tr:outputText value="#{interactionBean.currentInteraction.ac}"/>
                </tr:panelLabelAndMessage>
                <tr:panelLabelAndMessage label="Primary DB Ref:">
                    <tr:iterator var="idXref" value="#{iaf:getIdentityXrefs(interactionBean.currentInteraction)}">
                        <tr:outputText value="#{idXref.primaryId} (#{idXref.cvDatabase.shortLabel})"/>
                    </tr:iterator>
                </tr:panelLabelAndMessage>
            </tr:panelFormLayout>

            <br/>

            <tr:panelTabbed position="above">
                <tr:showDetailItem text="Interacting Molecules">
                    <tr:panelHeader text="Participants">

                        <tr:table binding="#{interactionBean.componentsTable}"
                    var="ao" value="#{interactionBean.currentInteraction.components}"
                    rowBandingInterval="1" rows="25">

               <tr:column headerText="Name">
                  <tr:outputText value="#{ao.interactor.shortLabel}"/>
              </tr:column>
              <tr:column headerText="AC (Interactor)">
                  <h:commandLink value="#{ao.interactor.ac}" action="interactor" >
                      <f:param name="ac" value="#{ao.ac}"/>
                  </h:commandLink>
              </tr:column>
              <tr:column headerText="Description" >
                  <tr:outputText value="#{ao.interactor.fullName}"/>
              </tr:column>
              <tr:column headerText="Type" >
                  <tr:outputText value="#{ao.interactor.cvInteractorType.shortLabel} (#{ao.interactor.cvInteractorType.miIdentifier})"/>
              </tr:column>

          </tr:table>

                    </tr:panelHeader>

                </tr:showDetailItem>

                <tr:showDetailItem text="Annotations">
                    <tr:panelHeader text="Annotations">
                           <tr:table var="annot" value="#{interactionBean.currentInteraction.annotations}">
                               <tr:column headerText="Topic">
                                   <tr:outputText value="#{annot.cvTopic.shortLabel}"/>
                               </tr:column>
                               <tr:column headerText="Text">
                                   <tr:outputText value="#{annot.annotationText}"/>
                               </tr:column>
                           </tr:table>
                        <tr:table var="annot" value="#{interactionBean.currentInteraction.xrefs}">
                               <tr:column headerText="Topic">
                                   <tr:outputText value="#{annot.cvDatabase.shortLabel}"/>
                               </tr:column>
                               <tr:column headerText="Text">
                                   <tr:outputText value="#{annot.primaryId}"/>
                               </tr:column>
                           </tr:table>
                    </tr:panelHeader>

                </tr:showDetailItem>

                <tr:showDetailItem text="Cross References">
                      <br/>

                    <iav:panelCategory id="xrefPanel1" var="xrefs" value="#{iaf:toXrefCategoryModel(interactionBean.currentInteraction.xrefs)}">
                        <iav:panelCategoryColumn>
                            <iav:categoryGroup id="imexGroup" title="IMEx">
                                <iav:categoryItem name="IMEx"
                                                  description="IMEx identifier"
                                                  category="MI:0670">
                                    <ui:include src="/pages/xref_list.xhtml"/>
                                </iav:categoryItem>

                                <iav:categoryItem name="DIP"
                                                  description="The database of interacting protein (DIP) database stores experimentally determined interactions between proteins"
                                                  category="MI:0465"
                                                  url="http://dip.doe-mbi.ucla.edu/">
                                    <ui:include src="/pages/xref_list.xhtml"/>
                                </iav:categoryItem>
                                <iav:categoryItem name="MINT"
                                                  description="The Moleculer INTeraction database (MINT) is a relational database designed to store interactions between biological molecules"
                                                  category="MI:0486"
                                                  url="http://mint.bio.uniroma2.it/mint/">
                                    <ui:include src="/pages/xref_list.xhtml"/>
                                </iav:categoryItem>
                            </iav:categoryGroup>
                        </iav:panelCategoryColumn>
                    </iav:panelCategory>
                </tr:showDetailItem>


            </tr:panelTabbed>

        </tr:panelHeader>

    </ui:define>

</ui:composition>