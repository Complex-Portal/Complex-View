<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"


                xmlns:composite="http://java.sun.com/jsf/composite">

<!--           xmlns:iv="http://java.sun.com/jsf/composite/intactview"
                xmlns:iamf="http://intact.ebi.ac.uk/mitabfunctions"
                xmlns:iav="http://intact.ebi.ac.uk/view"
                xmlns:iax="http://intact.ebi.ac.uk/extlinks"
-->

    <!-- INTERFACE -->
  <composite:interface>
      <composite:attribute name="url" type="java.lang.String" required="true"/>
  </composite:interface>

  <!-- IMPLEMENTATION -->
    <composite:implementation>

        <h:outputScript library= "javascript" name="InteractionRepresentation/resources/annotOverlaping.js" target="head"/>
  <!--      <h:outputScript library="javascript/InteractionRepresentation/resources" name="jquery-1.4.3.min.js" target="head"/>
        <h:outputScript library= "javascript/InteractionRepresentation/resources" name="jquery-ui-1.8.10.custom.css" target="head"/>
        <h:outputScript library= "javascript/InteractionRepresentation/resources" name="jquery-ui-1.8.10.custom.min.js" target="head"/> -->
        <h:outputScript library= "javascript" name="InteractionRepresentation/resources/raphael.js" target="head"/>
        <h:outputScript library= "javascript" name="InteractionRepresentation/InteractionRepresentation/ui.Interaction.js" target="head"/>
        <h:outputScript library= "javascript" name="InteractionRepresentation/InteractionRepresentation/resources/js/featureDrawer.js" target="head"/>
        <h:outputScript library= "javascript" name="InteractionRepresentation/InteractionRepresentation/resources/js/participantDrawer.js" target="head"/>
        <h:outputScript library= "javascript" name="InteractionRepresentation/InteractionRepresentation/resources/js/rangeStatusFunctionCollection.js" target="head"/>
        <h:outputScript library= "javascript" name="InteractionRepresentation/InteractionRepresentation/resources/js/shapeDrawer.js" target="head"/>
        <h:outputScript library= "javascript" name="InteractionRepresentation/InteractionRepresentation/resources/js/utils.js" target="head"/>

       <table width="100%" id="featureTable">
           <tr>
               <td>
                   <div style="float:right">
                        <p:commandLink onclick="whatIsFeaturesDialog.show()">
                            What is this image
                            <h:graphicImage alt="helpIcon" url="/images/help.png"/>
                        </p:commandLink>
                    </div>
               </td>
           </tr>
           <tr>
               <td style="width:75%;vertical-align:top;text-align:center;" id="featureColumn"/>
           </tr>
       </table>



       <script type="text/javascript">
           intRes = null;
           jQuery(function(){
               intRes = $('#featureColumn').Interaction({
                   width: $("#featureColumn").width(),
                   developingMode: true,
                   jsonUrl : '#{cc.attrs.url}',
                   proxyUrl: '#{facesContext.externalContext.requestContextPath}/proxy',
                   useProxyForData: false,
                   legendPosition: 'right',
                   loadingImageUrl: '#{facesContext.externalContext.requestContextPath}/images/wait_red_indicator.gif'
               });
           });

        </script>

    </composite:implementation>

</ui:composition>
