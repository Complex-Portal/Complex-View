<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jstl/core"
                xmlns:p="http://primefaces.prime.com.tr/ui"

                template="/main_template.xhtml">

    <ui:define name="topNavigation">
        <ui:include src="/shared/top_navigation_bar.xhtml">
            <ui:param name="selected" value="curate"/>
        </ui:include>
    </ui:define>

    <ui:define name="top">

        <h:panelGroup rendered="#{publicationController != null}">
            <div style="float: right">
            <h:commandButton value="Save" actionListener="#{publicationController.doSave}"/>
            <h:outputText value=" Last Saved: #{publicationController.lastSaved}" rendered="#{publicationController.lastSaved != null}" />
        </div>

            <h:link outcome="/curate/publication" value="#{publicationController.firstAuthor} et al (#{publicationController.year})" rendered="#{publicationController.firstAuthor != null}"/>

            <h:panelGroup rendered="#{publicationController.publication.shortLabel != null}">
                (&#160;<h:outputText value="#{publicationController.publication.shortLabel}"/> )
            </h:panelGroup>
        </h:panelGroup>
    </ui:define>

    <ui:define name="content">
        <div id="menuSection" style="width:98%; position:fixed; margin-top: -10px; margin-left:-10px">
            <ui:insert name="menubar">
                <p:menubar>
                    <p:submenu label="Publication">
                        <p:submenu label="New" onclick="newPublicationDlg.show()"/>
                        <p:submenu label="Open by PMID" onclick="openByAcDlg.show()"/>
                        <p:submenu label="Save" url="#" rendered="#{publicationController.publication != null}">
                            <p:commandLink value="Save" actionListener="#{publicationController.doSave}" ajax="false"/>
                        </p:submenu>
                        <p:submenu label="Save &amp; Close" url="#" rendered="#{publicationController.publication != null}">
                            <p:commandLink value="Save &amp; Close" actionListener="#{publicationController.doSaveAndClose}"
                                    action="/curate/curate" ajax="false"/>
                        </p:submenu>
                    </p:submenu>
                    <p:submenu label="Experiments" rendered="#{publicationController.publication != null}"/>
                    <p:submenu label="Interactions" rendered="#{publicationController.publication != null}"/>
                    <p:submenu label="..."/>
                </p:menubar>

            </ui:insert>
        </div>

        <div style="width:100%; padding-top:30px">
            <ui:insert name="curateContent"/>
        </div>

    </ui:define>

    <ui:define name="dialogs">
        <ui:include src="menu_dialogs.xhtml"/>
    </ui:define>

</ui:composition>