<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jstl/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:p="http://primefaces.prime.com.tr/ui"
                xmlns:composite="http://java.sun.com/jsf/composite"
                xmlns:ia="http://java.sun.com/jsf/composite/components/intact">

    <!-- INTERFACE -->
  <composite:interface>
    <composite:attribute name="value" type="java.util.Collection"/>
  </composite:interface>

  <!-- IMPLEMENTATION -->
    <composite:implementation>

        <ui:repeat value="#{cc.attrs.value}" var="participant" varStatus="status">

            <div style="width: 960px; #{(status.index % 2) == 0 ? 'background-color: #f8f8ff;' : ''}};">

                <ia:collapsiblePanel open="false"
                                    title="#{participant.interactor.shortLabel} (#{interactionController.getInteractorIdentity(participant.interactor)})"
                                    titleRight="#{participant.interactor.cvInteractorType.shortLabel} | #{participant.interactor.bioSource.shortLabel} | #{participant.interactor.fullName}"
                                    titleRightStyle="color:#CDCDCD;">

                    <table class="tableBasicForm" width="900px" style="padding-left: 50px;">
                        <tr>
                            <td class="firstCell">
                                <p:graphicImage alt="starIcon" url="/resources/images/shallow-star.png" onclick="alert('Favorite not implemented yet!');" />
                                &#160;&#160;&#160;
                                <h:link outcome="/curate/participant" value="Edit" includeViewParams="true">
                                    <f:param name="ac" value="#{participant.ac}"/>
                                </h:link>
                                <!--<h:commandButton value="Edit" action="/curate/participant">-->
                                    <!--<f:setPropertyActionListener value="#{participant.ac}" target="#{participantController.ac}" />-->
                                <!--</h:commandButton>-->
                            </td>
                            <td >
                                <h:outputLabel value="AC: " for="acTxt" class="intact-disabled"/>
                                <h:inputText id="acTxt" value="#{participant.ac}"
                                             size="10" disabled="true" class="intact-disabled"/>
                            </td>
                            <td style="text-align: right;">

                            </td>
                        </tr>
                        <tr>
                            <td class="firstCell">
                                <h:outputLabel value="Experimental role(s): " for="expRoleTxt"/>
                            </td>
                            <td >
                                <ia:inputCvObject id="expRoleTxt" cvIdentifier="MI:0495"
                                        value="#{interactionController.getExperimentalRole(participant)}"
                                        selectItems="#{cvObjectService.experimentalRoleSelectItems}"/>
                            </td>
                            <td style="padding-left: 150px;">
                                <h:outputLabel value="Stoichiometry: " for="stoichiometryTxt"/>
                                <p:spinner id="stoichiometryTxt" value="#{participant.stoichiometry}" stepFactor="1"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="firstCell">
                                <h:outputLabel value="Biological role: " for="bioRoleTxt"/>
                            </td>
                            <td colspan="2">
                                <ia:inputCvObject id="bioRoleTxt" cvIdentifier="MI:0500"
                                                  value="#{participant.cvBiologicalRole}"
                                                  selectItems="#{cvObjectService.biologicalRoleSelectItems}"/>
                            </td>
                        </tr>
                        <tr>
                            <td class="firstCell">
                                <h:outputLabel value="Expressed in: " for="expressedInTxt"/>
                                <!--<h:outputLabel value="Expressed in: "/>-->
                            </td>
                            <td>
                                <ia:inputBioSource id="expressedInTxt" value="#{participant.expressedIn}"
                                        selectItems="#{bioSourceService.bioSourceSelectItems}"/>
                            </td>
                            <td style="padding-left: 150px;">
                                <h:outputLabel value="Author given name: " for="authorGivenNameTxt"/>
                                <!-- TODO handle author given name ...  -->
                                <h:inputText id="authorGivenNameTxt" value="#{interactionController.getAuthorGivenName(participant)}" size="10">
                                    <f:ajax event="valueChange" listener="#{interactionController.changed}"/>
                                </h:inputText>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3">

                                <h4>Features (#{participant.bindingDomains.size()})</h4>

                                <ia:featureTable value="#{participant.bindingDomains}"
                                                 render="#{not participant.bindingDomains.isEmpty()}"/>
                            </td>
                        </tr>
                    </table>

               </ia:collapsiblePanel>
                
            </div>

        </ui:repeat>

    </composite:implementation>

</ui:composition>