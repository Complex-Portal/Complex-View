<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:p="http://primefaces.org/ui"

                template="/admin/admin_template.xhtml">

    <ui:define name="adminContent">
        <p:panel header="Notifications">
            <h:panelGrid columns="3">
                <h:outputLabel for="urgentTxt" value="Global urgent notification: "/>
                <p:inputText id="urgentTxt" value="#{notificationController.globalUrgentNotification}" size="80"/>
                <p:commandButton value="Submit" process="urgentTxt" update="messagesComponent"/>

                <h:outputLabel for="globalTxt" value="Global notification: "/>
                <p:inputText id="globalTxt" value="#{notificationController.globalNotification}" size="80"/>
                <p:commandButton value="Submit" process="globalTxt" update="messagesComponent"/>
            </h:panelGrid>
         </p:panel>

        <br/>

        <ui:param name="runsOnH2" value="#{fn:contains(editorConfig.databaseUrl, 'h2')}" />
        <p:panel header="Database">
            <h:panelGrid columns="2">

                <h:graphicImage alt="Warning" url="/resources/images/warn.gif" rendered="#{runsOnH2}" />
                <h:outputText value="You appear to be running on an H2 database, you must not run a production system
                                     on H2 and we recommend you migrate to Oracle or PostgreSQL ASAP !!"
                              rendered="#{runsOnH2}"/>

                <h:outputText value="Instance name:" style="font-weight:bold"/>
                <h:outputText value="#{editorConfig.instanceName}"/>

                <h:outputText value="Core Database URL:" style="font-weight:bold"/>
                <h:outputText value="#{editorConfig.databaseUrl}"/>

                <h:outputText value="Users Database URL:" style="font-weight:bold"/>
                <h:outputText value="#{editorConfig.usersDatabaseUrl}"/>

                <h:outputText value="Schema version:" style="font-weight:bold"/>
                <h:outputText value="#{applicationInfo.schemaVersion}"/>

                <h:outputText value="Last CV update:" style="font-weight:bold"/>
                <h:outputText value="#{applicationInfo.lastCvUpdate}"/>
            </h:panelGrid>

            <p>Datasources:</p>

            <table>
                <ui:repeat value="#{applicationInfo.dataSources}" var="entry">
                    <tr>
                        <td>
                            <h:outputText value="#{entry.key}:" style="font-weight:bold"/>
                        </td><td>
                        <h:outputText value="#{entry.value}"/>
                    </td>
                    </tr>
                </ui:repeat>
            </table>

            <p>Transaction managers:</p>

             <table>
                <ui:repeat value="#{applicationInfo.transactionManagers}" var="entry">
                    <tr>
                        <td>
                            <h:outputText value="#{entry.key}:" style="font-weight:bold"/>
                        </td><td>
                        <h:outputText value="#{entry.value}"/>
                    </td>
                    </tr>
                </ui:repeat>
            </table>
        </p:panel>

        <br/>

        <p:panel header="UniProt">
            <h:panelGrid columns="2">
                <h:outputText value="Uniprot JAPI Version:" style="font-weight:bold"/>
                <h:outputText value="#{applicationInfo.uniprotJapiVersion}"/>

                <h:outputText value="Last uniprot update:" style="font-weight:bold"/>
                <h:outputText value="#{applicationInfo.lastUniprotUpdate}"/>
            </h:panelGrid>
        </p:panel>

        <br/>

        <p:panel header="Core">
            <h:panelGrid columns="2">
                <h:outputText value="Default institution:" style="font-weight:bold"/>
                <h:outputText value="#{intactConfig.defaultInstitution}"/>

                <h:outputText value="AC prefix:" style="font-weight:bold"/>
                <h:outputText value="#{intactConfig.acPrefix}"/>

                <h:outputText value="CV prefix:" style="font-weight:bold"/>
                <h:outputText value="#{intactConfig.localCvPrefix}"/>

                <h:outputText value="Auto-update experiment label:" style="font-weight:bold"/>
                <h:outputText value="#{intactConfig.autoUpdateExperimentLabel}"/>

                <h:outputText value="Auto-update interaction label:" style="font-weight:bold"/>
                <h:outputText value="#{intactConfig.autoUpdateInteractionLabel}"/>

                 <h:outputText value="Skip schema check:" style="font-weight:bold"/>
                <h:outputText value="#{intactConfig.skipSchemaCheck}"/>
            </h:panelGrid>
        </p:panel>

        <br/>

        <p:panel header="Database Counts">
            <h:outputText value="#{applicationInfo.databaseCounts}" escape="false"/>
        </p:panel>

        <br/>

        <p:panel header="System" collapsed="true" toggleable="true">
            <table>
                <ui:repeat value="#{applicationInfo.systemPropertyNames}" var="propName">
                    <tr>
                        <td>
                            <h:outputText value="#{propName}:" style="font-weight:bold"/>
                        </td><td>
                        <h:outputText value="#{applicationInfo.getSystemProperty(propName)}"/>
                    </td>
                    </tr>
                </ui:repeat>
            </table>
        </p:panel>

        <br/>

        <p:panel header="Spring Beans" collapsed="true" toggleable="true">
            <table>
                <ui:repeat value="#{applicationInfo.beanNames}" var="beanName">
                    <tr>
                        <td>
                            <h:outputText value="#{beanName}"/>
                        </td>
                        <!--<td>-->

                    <!--</td>-->
                    </tr>
                </ui:repeat>
            </table>
        </p:panel>

        <br/>

    </ui:define>

</ui:composition>